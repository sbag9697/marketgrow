# 결제 시스템 설정 가이드

## 1. 토스페이먼츠 설정

### 1.1 테스트 결제 (현재 설정됨)
```javascript
// 현재 테스트 키 사용 중
CLIENT_KEY: 'test_ck_Z1aOwX7K8m6vNzPPOgRPyQxzvNPG'
```

**테스트 카드 정보:**
- 카드번호: 4242-4242-4242-4242
- 유효기간: 아무 날짜 (미래)
- CVC: 아무 숫자 3자리
- 비밀번호: 아무 숫자 2자리

### 1.2 실제 결제 전환 방법

1. **토스페이먼츠 가입 및 심사**
   - https://www.tosspayments.com
   - 사업자등록증 필요
   - 심사 기간: 1-2일

2. **실제 API 키 발급**
   - 대시보드 → 개발 → API 키
   - 클라이언트 키: `live_ck_로 시작`
   - 시크릿 키: `live_sk_로 시작`

3. **코드 업데이트**
   ```javascript
   // js/config.js 수정
   CLIENT_KEY: 'live_ck_실제키입력'
   ```

4. **Railway 환경 변수 업데이트**
   ```
   TOSS_CLIENT_KEY=live_ck_실제키
   TOSS_SECRET_KEY=live_sk_실제키
   ```

## 2. 결제 프로세스

### 현재 구현된 기능:
- ✅ 카드 결제
- ✅ 가상계좌 이체
- ✅ 계좌이체
- ✅ 휴대폰 결제
- ✅ 카카오페이
- ✅ 토스페이
- ✅ 네이버페이

### 결제 플로우:
1. 사용자가 서비스/패키지 선택
2. 주문서 작성
3. 결제 수단 선택
4. 토스페이먼츠 결제창 호출
5. 결제 완료/실패 처리
6. 주문 정보 저장

## 3. 결제 테스트 방법

### 3.1 테스트 시나리오
1. https://resplendent-heliotrope-e5c264.netlify.app/services.html 접속
2. 서비스 선택 → "주문하기" 클릭
3. 주문 정보 입력
4. 결제 수단 선택
5. 테스트 카드로 결제

### 3.2 테스트 결과 확인
- 성공: `/payment-success.html`로 이동
- 실패: `/payment-fail.html`로 이동
- 주문 내역: `/dashboard.html`에서 확인

## 4. 보안 주의사항

### 4.1 시크릿 키 보안
- 시크릿 키는 절대 프론트엔드에 노출 금지
- 서버 환경 변수로만 관리
- GitHub에 커밋 금지

### 4.2 웹훅 설정 (선택사항)
토스페이먼츠 대시보드에서:
1. 웹훅 → 웹훅 추가
2. URL: `https://marketgrow-production.up.railway.app/api/webhooks/payment`
3. 이벤트 선택: 결제 승인, 결제 취소

## 5. 수수료 정보

### 온라인 결제 수수료:
- 신용카드: 2.9% + VAT
- 체크카드: 2.5% + VAT
- 계좌이체: 1.5% + VAT
- 가상계좌: 건당 300원
- 간편결제: 2.9% + VAT

### 정산 주기:
- D+2 영업일 (기본)
- D+1 영업일 (프리미엄)

## 6. 고객 지원

### 토스페이먼츠 지원:
- 기술 문의: developers@tosspayments.com
- 일반 문의: 1544-7772
- 문서: https://docs.tosspayments.com

## 7. 체크리스트

- [ ] 토스페이먼츠 가입 완료
- [ ] 사업자등록증 제출
- [ ] API 키 발급
- [ ] 테스트 결제 성공
- [ ] 실제 결제 키로 전환
- [ ] 웹훅 설정 (선택)
- [ ] 정산 계좌 등록