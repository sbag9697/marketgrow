<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Mock 모드 완전 제거</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            padding: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }
        .container {
            background: white;
            color: #333;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background: #5a67d8;
        }
        .status {
            margin: 20px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
        }
        .success {
            color: #28a745;
        }
        .error {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mock 모드 완전 제거</h1>
        
        <div class="status" id="status">
            검사 중...
        </div>
        
        <button onclick="removeMockCompletely()">Mock 모드 완전 제거</button>
        <button onclick="window.location.href='signup.html'">회원가입 페이지로</button>
        
        <script>
            // 페이지 로드 시 상태 확인
            function checkStatus() {
                const statusDiv = document.getElementById('status');
                const mockItems = [];
                
                // localStorage 검사
                for (let key in localStorage) {
                    if (key.toLowerCase().includes('mock') || 
                        key.toLowerCase().includes('test') ||
                        key === 'useMockServer') {
                        mockItems.push(`localStorage.${key} = ${localStorage[key]}`);
                    }
                }
                
                // sessionStorage 검사
                for (let key in sessionStorage) {
                    if (key.toLowerCase().includes('mock') || 
                        key.toLowerCase().includes('test')) {
                        mockItems.push(`sessionStorage.${key} = ${sessionStorage[key]}`);
                    }
                }
                
                if (mockItems.length > 0) {
                    statusDiv.innerHTML = `
                        <h3 class="error">⚠️ Mock 관련 데이터 발견:</h3>
                        <ul style="text-align: left;">
                            ${mockItems.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    `;
                } else {
                    statusDiv.innerHTML = `
                        <h3 class="success">✅ Mock 모드가 비활성화되어 있습니다</h3>
                        <p>실제 API가 사용됩니다.</p>
                    `;
                }
            }
            
            // Mock 완전 제거
            function removeMockCompletely() {
                console.log('Mock 모드 완전 제거 시작...');
                
                // localStorage에서 모든 mock 관련 항목 제거
                const keysToRemove = [];
                for (let key in localStorage) {
                    if (key.toLowerCase().includes('mock') || 
                        key.toLowerCase().includes('test') ||
                        key === 'useMockServer') {
                        keysToRemove.push(key);
                    }
                }
                
                keysToRemove.forEach(key => {
                    console.log(`Removing localStorage.${key}`);
                    localStorage.removeItem(key);
                });
                
                // sessionStorage 완전 초기화
                sessionStorage.clear();
                console.log('SessionStorage cleared');
                
                // 특정 키 강제 제거
                localStorage.removeItem('useMockServer');
                localStorage.removeItem('mockMode');
                localStorage.removeItem('testMode');
                localStorage.removeItem('mockUsers');
                localStorage.removeItem('mockOrders');
                
                // window 객체에서 mock 관련 제거
                if (window.mockAPI) {
                    delete window.mockAPI;
                    console.log('window.mockAPI removed');
                }
                
                // 캐시 무효화를 위한 타임스탬프 설정
                localStorage.setItem('cacheReset', Date.now().toString());
                
                alert('Mock 모드가 완전히 제거되었습니다!\n페이지를 새로고침합니다.');
                
                // 강제 새로고침 (캐시 무시)
                window.location.reload(true);
            }
            
            // 페이지 로드 시 상태 확인
            checkStatus();
            
            // 1초마다 상태 업데이트
            setInterval(checkStatus, 1000);
        </script>
    </div>
</body>
</html>